package nc.pubitf.ta.overtime;

import java.util.Map;

import nc.vo.pub.BusinessException;
import nc.vo.pub.lang.UFDouble;
import nc.vo.pub.lang.UFLiteralDate;
import nc.vo.ta.leave.LeaveRegVO;
import nc.vo.ta.overtime.CalendarDateTypeEnum;
import nc.vo.ta.overtime.MonthStatOTCalcVO;
import nc.vo.ta.overtime.OTBalanceDetailVO;
import nc.vo.ta.overtime.OTBalanceLeaveVO;
import nc.vo.ta.overtime.OTLeaveBalanceVO;
import nc.vo.ta.overtime.OTSChainNode;
import nc.vo.ta.overtime.OvertimeRegVO;
import nc.vo.ta.overtime.OvertimeSettleTypeEnum;
import nc.vo.ta.overtime.QueryValueTypeEnum;

public interface ISegDetailService {
	/**
	 * ]约影喾侄蚊骷（批量）
	 * 
	 * I者：根o定的加班登ο蠹合，逐]约影喾侄蚊骷c 增加加班分段明r，父c的判啵盒§兜褥懂前ca的最近一c，
	 * 如新ca不存在，t新增c，K接原父c後mc（更新父cPK楫前父cPK的c之父cPK=前cPK）
	 * 
	 * @param overtimeRegVOs
	 *            加班登到M
	 * @throws BusinessException
	 */
	public void regOvertimeSegDetail(OvertimeRegVO[] overtimeRegVOs) throws BusinessException;

	/**
	 * 更新加班分段明（批量）
	 * 
	 * I者：根o定的加班登ο蠹合，逐更新加班分段明c
	 * 
	 * @param overtimeRegVOs
	 *            加班登到M
	 * @throws BusinessException
	 */
	public void updateOvertimeSegDetail(OvertimeRegVO[] overtimeRegVOs) throws BusinessException;

	/**
	 * h除加班分段明（批量）
	 * 
	 * @param overtimeRegVOs
	 *            加班登到M
	 * @throws BusinessException
	 */
	public void deleteOvertimeSegDetail(OvertimeRegVO[] overtimeRegVOs) throws BusinessException;

	/**
	 * ]约影喾侄魏虽N（批量）
	 * 
	 * I者：根o定的休假登ο蠹合，逐]约影喾侄魏虽N，
	 * 休假登]r，根SegDetailAggVO在\行r造Da休、未作U、未核N完成、未Y算、核N剩Nr>0的快捷L蜗蜴表（用於快速核N）
	 * 休假登保存rl生核N幼
	 * ，只核N加班D{休的，核Nr使用快捷L蜗蜴表按c序由小到大M行逐核N，K重新算已核Nr导敖痤~、核N剩Nr导敖痤~
	 * 、更新是否核N完成
	 * 
	 * 
	 * @param leaveRegVOs
	 *            休假登到M
	 * @throws BusinessException
	 */
	public void regOvertimeSegDetailConsume(LeaveRegVO[] leaveRegVOs) throws BusinessException;

	/**
	 * 修改加班分段核N（批量）
	 * 
	 * I者：根o定的休假登ο蠹合，逐更新加班分段明核N
	 * 
	 * @param leaveRegVOs
	 *            休假登
	 * @throws BusinessException
	 */
	public void updateOvertimeSegDetailConsume(LeaveRegVO[] leaveRegVOs) throws BusinessException;

	/**
	 * h除加班分段核N（批量）
	 * 
	 * @param leaveRegVOs
	 *            休假登
	 * @throws BusinessException
	 */
	public void deleteOvertimeSegDetailConsume(LeaveRegVO[] leaveRegVOs) throws BusinessException;

	/**
	 * 按起迄rg算rg段加班r导加班薪Y（批量）
	 * 
	 * I者：根o定的T工及rg，以及考勤t上的加班一月/三月的限制，超限部分做加班M，限炔糠肿槊舛加班M返回
	 * 本cr挡榭r，返回值⒃r捣到免及金~中，不再返回加班MR金~
	 * 
	 * @param pk_org
	 *            MPK
	 * @param pk_psndocs
	 *            算T工到M
	 * @param startDate
	 *            _始日期
	 * @param endDate
	 *            Y束日期
	 * @param curNodeHours
	 *            本cr
	 * @param checkedNodes
	 *            z查c集合，如oz查c集合，t熘屑虞d （楸苊猱前加班r段同r含有及免o法分清的情r）
	 * @return Map.Key=T工PK，Map.Value=UFDoube[0]:免加班M合金~，UFDouble[1]:加班M合金~
	 * @throws BusinessException
	 */
	Map<String, UFDouble[]> calculateTaxableByDate(String pk_org, String[] pk_psndocs, UFLiteralDate startDate,
			UFLiteralDate endDate, UFDouble curNodeHours, OTSChainNode checkedNodes) throws BusinessException;

	/**
	 * 按o定固定r薪及起迄rgY算（批量）
	 * 
	 * I者：根o定的T工r薪及rg，以及考勤t上的加班一月/三月的限制，超限部分做加班M，限炔糠肿槊舛加班M返回
	 * 
	 * @param psnFixSalary
	 *            T工固定r薪集合
	 * @param startDate
	 *            _始日期
	 * @param endDate
	 *            Y束日期
	 * @return Map.Key=T工PK，Map.Value=UFDoube[0]:免加班M合金~，UFDouble[1]:加班M合金~
	 * @throws BusinessException
	 */
	Map<String, UFDouble[]> settleByFixSalary(Map<String, UFDouble> psnFixSalary, UFLiteralDate startDate,
			UFLiteralDate endDate) throws BusinessException;

	/**
	 * 按考勤期g算rg段让舛加班金~（批量）
	 * 
	 * I者：根o定的T工及rg，以及考勤t上的加班一月/三月的限制，限定炔糠肿槊舛加班M返回
	 * 
	 * @param pk_org
	 *            M
	 * @param pk_psndocs
	 *            算T工到M
	 * @param cyear
	 *            考勤年度
	 * @param cperiod
	 *            考勤期g
	 * @return Map.Key=T工PK，Map.Value=免加班M合金~
	 * @throws BusinessException
	 */
	Map<String, UFDouble> calculateTaxFreeAmountByPeriod(String pk_org, String[] pk_psndocs, String cyear,
			String cperiod) throws BusinessException;

	/**
	 * 按考勤期g算rg段加班金~（批量）
	 * 
	 * I者：根o定的T工及rg，以及考勤t上的加班一月/三月的限制，超限部分做加班M
	 * 
	 * @param pk_org
	 *            M
	 * @param pk_psndocs
	 *            算T工到M
	 * @param cyear
	 *            考勤年度
	 * @param cperiod
	 *            考勤期g
	 * @return Map.Key=T工PK，Map.Value=加班M合金~
	 * @throws BusinessException
	 */
	Map<String, UFDouble> calculateTaxableAmountByPeriod(String pk_org, String[] pk_psndocs, String cyear,
			String cperiod) throws BusinessException;

	/**
	 * 取rg段让舛加班金~（批量）
	 * 
	 * I者：根o定的T工及rg，以及考勤t上的加班一月/三月的限制，超限部分做加班M，限炔糠肿槊舛加班M返回
	 * 
	 * @param pk_psndocs
	 *            算T工到M
	 * @param startDate
	 *            _始日期（年资起算对应当前开始日期）
	 * @param endDate
	 *            Y束日期（年资起算对应当前结束日期）
	 * @return Map.Key=T工PK，Map.Value=UFDoube:免加班M合金~
	 * @throws BusinessException
	 */
	Map<String, UFDouble> getOvertimeTaxfreeAmount(String[] pk_psndocs, UFLiteralDate startDate, UFLiteralDate endDate)
			throws BusinessException;

	/**
	 * 取rg段加班金~（批量）
	 * 
	 * I者：根o定的T工及rg，以及考勤t上的加班一月/三月的限制，超限部分做加班M，限炔糠肿槊舛加班M返回
	 * 
	 * @param pk_psndocs
	 *            算T工到M
	 * @param startDate
	 *            _始日期（年资起算对应当前开始日期）
	 * @param endDate
	 *            Y束日期（年资起算对应当前结束日期）
	 * @return Map.Key=T工PK，Map.Value=UFDoube:加班M合金~
	 * @throws BusinessException
	 */
	Map<String, UFDouble> getOvertimeTaxableAmount(String[] pk_psndocs, UFLiteralDate startDate, UFLiteralDate endDate)
			throws BusinessException;

	/**
	 * 根起迄日期、T工R外加a休天担ㄅ量）
	 * 
	 * I者：根o定的起迄日期及人T，查rg段人有引用了加班分段依的加班登危R外加a休天
	 * 
	 * @param startDate
	 *            _始日期
	 * @param endDate
	 *            截止日期
	 * @param pk_psndocs
	 *            加班T工PK到M
	 * @return Map.Key=T工PK，Map.Value=rg段韧饧友a休天R
	 * @throws BusinessException
	 */
	public Map<String, UFDouble> getHoursToRestByScope(UFLiteralDate startDate, UFLiteralDate endDate,
			String[] pk_psndocs) throws BusinessException;

	/**
	 * 根考勤期g、T工R外加a休天担ㄅ量）
	 * 
	 * I者：根o定的考勤年及期g，取出期g下所有日期，K同人TPK到M{用方法4，K返回方法4Y果
	 * 
	 * @param pk_org
	 *            M
	 * @param cyear
	 *            考勤年份
	 * @param cperiod
	 *            考勤期g
	 * @param pk_psndocs
	 *            加班T工PK到M
	 * @return Map.Key=T工PK，Map.Value=考勤期g韧饧友a休天R
	 * @throws BusinessException
	 */
	public Map<String, UFDouble> getHoursToRestByPeriod(String pk_org, String cyear, String cperiod, String[] pk_psndocs)
			throws BusinessException;

	/**
	 * 根人T及加班日期取加班rL
	 * 
	 * I者：根o定的人T及加班日期取加班rL
	 * 
	 * @param pk_org
	 *            MPK
	 * @param pk_psndocs
	 *            人TPK到M
	 * @param overtimeDate
	 *            加班日期
	 * @return MAP<pk_psndoc,MAP<参数类型,数值> 参数类型：加班rL(overtime)
	 *         平日加班时长(dailyovertime)休息日加班rL(restovertime)
	 *         定假日加班rL(holidayovertime)加班M(overtimesalary)
	 */
	Map<String, Map<QueryValueTypeEnum, UFDouble>> getOvertimeHours(String pk_org, String[] pk_psndocs,
			UFLiteralDate overtimeDate) throws BusinessException;

	/**
	 * 根人T及加班日期、加班e取加班rL
	 * 
	 * @param pk_org
	 *            MPK
	 * @param pk_psndocs
	 *            人TPK到M
	 * @param overtimeDate
	 *            加班日期
	 * @param pk_overtimetype
	 *            加班e
	 * @return Map<String, UFDouble> 指定加班e、加班日期的加班rL，MAP<殿型, 抵>
	 *         ，殿型：人TPK，数值：加班rL
	 * @throws BusinessException
	 */
	Map<String, UFDouble> getOvertimeHoursByType(String pk_org, String[] pk_psndocs, UFLiteralDate overtimeDate,
			String pk_overtimetype) throws BusinessException;

	/**
	 * 根人T及加班日期、加班e取加班D{休rL
	 * 
	 * @param pk_org
	 *            MPK
	 * @param pk_psndocs
	 *            人TPK到M
	 * @param overtimeDate
	 *            加班日期
	 * @param pk_overtimetype
	 *            加班e
	 * @return Map<String, UFDouble> 指定加班e、加班日期的加班D{休rL，MAP<殿型, 抵>
	 *         ，殿型：人TPK，数值：加班rL
	 * @throws BusinessException
	 */
	Map<String, UFDouble> getOvertimeToRestHoursByType(String pk_org, String[] pk_psndocs, UFLiteralDate overtimeDate,
			String pk_overtimetype) throws BusinessException;

	/**
	 * 根人T及加班起迄日期、加班e取加班D{休OTLeaveBalanceVO集合
	 * 
	 * @param pk_org
	 *            MPK
	 * @param pk_psndocs
	 *            人TPK到M
	 * @param beginDate
	 *            起始日期
	 * @param endDate
	 *            截止日期
	 * @param pk_overtimetype
	 *            加班e
	 * @return
	 * @throws BusinessException
	 */
	OTLeaveBalanceVO[] getOvertimeToRestHoursByType(String pk_org, String[] pk_psndocs, UFLiteralDate beginDate,
			UFLiteralDate endDate, String pk_overtimetype) throws BusinessException;

	/**
	 * 根人T及起迄日期取外加a休OTLeaveBalanceVO集合
	 * 
	 * @param pk_org
	 *            MPK
	 * @param pk_psndocs
	 *            人TPK到M
	 * @param beginDate
	 *            起始日期
	 * @param endDate
	 *            截止日期
	 * @param pk_leavetypecopy
	 *            休假e
	 * @param isSettled
	 *            是否Y算
	 * @return
	 * @throws BusinessException
	 */
	OTLeaveBalanceVO[] getLeaveExtHoursByType(String pk_org, String[] pk_psndocs, UFLiteralDate beginDate,
			UFLiteralDate endDate, String pk_leavetypecopy, boolean isSettled) throws BusinessException;

	/**
	 * 根人T及起迄日期取外加a休OTBalanceDetailVO集合
	 * 
	 * @param pk_org
	 * @param pk_psndoc
	 * @param beginDate
	 * @param endDate
	 * @param pk_leavetypecopy
	 * @param isSettled
	 * @return
	 * @throws BusinessException
	 */
	OTBalanceDetailVO[] getLeaveExtByType(String pk_org, String pk_psndoc, UFLiteralDate beginDate,
			UFLiteralDate endDate, String pk_leavetypecopy, boolean isSettled) throws BusinessException;

	/**
	 * 根人T加班起迄日期、加班e取加班D{休OTBalanceDetailVO集合
	 * 
	 * @param pk_org
	 *            MPK
	 * @param pk_psndoc
	 *            人TPK到M
	 * @param beginDate
	 *            起始日期
	 * @param endDate
	 *            截止日期
	 * @param pk_overtimetype
	 *            加班e
	 * @return
	 * @throws BusinessException
	 */
	OTBalanceDetailVO[] getOvertimeToRestByType(String pk_org, String pk_psndoc, UFLiteralDate beginDate,
			UFLiteralDate endDate, String pk_overtimetype) throws BusinessException;

	/**
	 * 根人T、日v天型及Y算型取考勤期g加班合rL
	 * 
	 * @param pk_org
	 *            MPK
	 * @param pk_psndocs
	 *            人TPK到M
	 * @param cyear
	 *            考勤年
	 * @param cperiod
	 *            考勤期g
	 * @param dateType
	 *            日烟祛型
	 * @param settleType
	 *            Y算型
	 * @return MonthStatOTCalcVO[]
	 * @throws BusinessException
	 */
	MonthStatOTCalcVO[] getOvertimeSalaryHoursByTBMPeriodSource(String pk_org, String[] pk_psndocs, String cyear,
			String cperiod, CalendarDateTypeEnum dateType, OvertimeSettleTypeEnum settleType) throws BusinessException;

	/**
	 * 通过原单类型及PK查找休假单
	 * 
	 * @param sourceType
	 *            原单类型
	 * @param pk_sourceBill
	 *            原单PK
	 * @return
	 */
	public OTBalanceLeaveVO[] getLeaveRegBySourceBill(int sourceType, String pk_sourceBill) throws BusinessException;

}